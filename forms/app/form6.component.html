<div class="container">
  <p>Form 6 -Introducing FormArrays and FormBuilder</p>

  <form [formGroup]="userForm" (submit)="onSubmit()">
    <hr>
    <input type="text" class="form-control" placeholder="Name" id="name" formControlName="name">
    <control-messages [control]="userForm.controls.name" form="userform"></control-messages>
    <hr>
    <textarea class="form-control" rows="4" placeholder="Description" formControlName="description"></textarea>
    
    <div formGroupName="contact"> Contact information:
       <button type="button" (click)="addEmail()">Add Email</button>
        <div formArrayName="emails"> 
            <div *ngFor="let email of emails.controls; let i=index" [formGroupName]="i">
                <input type="text" class="form-control" placeholder="email{{i+1}}" formControlName="email">
           <!--     <control-messages [control]="userForm.controls.contact.controls.email{{i+1}}"></control-messages> -->           
            </div>
            </div>       
      <input type="number" class="form-control" placeholder="telephonenr" formControlName="telephone">
      <control-messages [control]="userForm.controls.contact.controls.telephone"></control-messages>
      <input type="number" class="form-control" placeholder="Alternative telephone" formControlName="telephone2">
      <control-messages [control]="userForm.controls.contact.controls.telephone2"></control-messages>

    </div>

    <button type="button" [disabled]="!userForm.valid" (click)="onSubmit()" class="btn btn-primary">Save</button>
  </form>

  <p>This is what's going to the server</p>
  <code>{{formdata}}</code>
</div>